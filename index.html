<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steekproefcalculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-900: #1a2332;
            --primary-800: #252f3f;
            --primary-700: #374151;
            --primary-600: #4b5563;
            --primary-500: #6b7280;
            --primary-400: #9ca3af;
            --primary-300: #d1d5db;
            --primary-200: #e5e7eb;
            --primary-100: #f3f4f6;
            --primary-50: #f9fafb;
            --accent: #3b82f6;
            --accent-dark: #2563eb;
            --accent-light: #dbeafe;
            --wit: #ffffff;
            --tekst: #1f2937;
            --tekst-licht: #6b7280;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--primary-100);
            color: var(--tekst);
            line-height: 1.5;
            font-size: 15px;
            -webkit-font-smoothing: antialiased;
        }

        /* Header */
        .header {
            background: var(--primary-900);
            color: var(--wit);
            padding: 1.5rem 2rem;
            border-bottom: 3px solid var(--accent);
        }

        .header-inner {
            max-width: 720px;
            margin: 0 auto;
        }

        .header h1 {
            font-size: 1.375rem;
            font-weight: 600;
            letter-spacing: -0.025em;
        }

        .header p {
            font-size: 0.9375rem;
            color: var(--primary-300);
            margin-top: 0.25rem;
        }

        /* Main */
        .main {
            max-width: 720px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Card */
        .card {
            background: var(--wit);
            border: 1px solid var(--primary-200);
            border-radius: 8px;
            margin-bottom: 1rem;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.04);
        }

        .card-header {
            background: var(--primary-800);
            padding: 0.75rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.625rem;
        }

        .card-nummer {
            width: 22px;
            height: 22px;
            background: var(--accent);
            color: var(--wit);
            font-weight: 600;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }

        .card-header h2 {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--wit);
            letter-spacing: -0.01em;
        }

        .card-body {
            padding: 1.25rem;
        }

        /* Info blok */
        .info {
            background: var(--primary-50);
            border-left: 3px solid var(--primary-400);
            padding: 0.875rem 1rem;
            margin-bottom: 1rem;
            border-radius: 0 4px 4px 0;
        }

        .info p {
            font-size: 0.8125rem;
            color: var(--tekst-licht);
            margin: 0;
            line-height: 1.6;
        }

        .info strong {
            color: var(--tekst);
            font-weight: 600;
        }

        /* Form */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        .form-label {
            display: block;
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--primary-700);
            margin-bottom: 0.375rem;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .input-wrap {
            position: relative;
        }

        input[type="number"] {
            width: 100%;
            padding: 0.75rem 1rem;
            padding-right: 5rem;
            font-size: 1rem;
            font-family: inherit;
            font-weight: 500;
            border: 1px solid var(--primary-300);
            border-radius: 6px;
            background: var(--wit);
            color: var(--tekst);
            transition: border-color 0.15s, box-shadow 0.15s;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-light);
        }

        .input-suffix {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8125rem;
            color: var(--primary-500);
            font-weight: 500;
        }

        /* Button group */
        .btn-group {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
        }

        .btn-option {
            padding: 0.875rem 0.5rem;
            font-size: 0.9375rem;
            font-family: inherit;
            font-weight: 600;
            border: 2px solid var(--primary-200);
            border-radius: 6px;
            background: var(--wit);
            color: var(--primary-600);
            cursor: pointer;
            transition: all 0.15s;
            text-align: center;
        }

        .btn-option:hover {
            border-color: var(--primary-400);
            background: var(--primary-50);
        }

        .btn-option.actief {
            background: var(--primary-800);
            border-color: var(--primary-800);
            color: var(--wit);
        }

        .btn-option small {
            display: block;
            font-size: 0.6875rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            margin-top: 0.125rem;
            opacity: 0.7;
        }

        /* Slider */
        .slider-wrap {
            padding: 0.25rem 0;
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 0.625rem;
        }

        .slider-header span {
            font-size: 0.8125rem;
            color: var(--tekst-licht);
        }

        .slider-value {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--primary-800);
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: var(--primary-200);
            border-radius: 3px;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--primary-800);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
            transition: transform 0.1s;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: var(--primary-800);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 0.375rem;
            font-size: 0.6875rem;
            color: var(--primary-400);
            text-transform: uppercase;
            letter-spacing: 0.02em;
        }

        /* Submit */
        .submit-btn {
            width: 100%;
            padding: 1rem;
            font-size: 0.9375rem;
            font-family: inherit;
            font-weight: 600;
            background: var(--accent);
            color: var(--wit);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.15s;
            letter-spacing: -0.01em;
        }

        .submit-btn:hover {
            background: var(--accent-dark);
        }

        /* Resultaat */
        .resultaat {
            margin-top: 1.5rem;
        }

        .resultaat-main {
            background: var(--primary-900);
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            color: var(--wit);
        }

        .resultaat-label {
            font-size: 0.8125rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--primary-400);
            margin-bottom: 0.5rem;
        }

        .resultaat-getal {
            font-size: 3.5rem;
            font-weight: 700;
            line-height: 1;
            letter-spacing: -0.03em;
            color: var(--wit);
        }

        .resultaat-eenheid {
            font-size: 0.875rem;
            color: var(--primary-400);
            margin-top: 0.25rem;
        }

        .resultaat-meta {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1px;
            background: var(--primary-700);
            margin-top: 1.5rem;
            border-radius: 6px;
            overflow: hidden;
        }

        .meta-item {
            background: var(--primary-800);
            padding: 1rem;
            text-align: center;
        }

        .meta-label {
            font-size: 0.6875rem;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            color: var(--primary-400);
            margin-bottom: 0.25rem;
        }

        .meta-value {
            font-size: 1rem;
            font-weight: 600;
            color: var(--wit);
        }

        /* Uitleg sectie */
        .uitleg {
            background: var(--wit);
            border: 1px solid var(--primary-200);
            border-radius: 8px;
            margin-top: 1rem;
            overflow: hidden;
        }

        .uitleg-header {
            background: var(--primary-50);
            padding: 0.875rem 1.25rem;
            border-bottom: 1px solid var(--primary-200);
        }

        .uitleg-header h3 {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--primary-700);
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }

        .uitleg-body {
            padding: 1.25rem;
        }

        .uitleg-body > p {
            font-size: 0.875rem;
            color: var(--tekst-licht);
            margin-bottom: 1rem;
        }

        /* Voorbeeld */
        .voorbeeld {
            background: var(--accent-light);
            border-radius: 6px;
            padding: 1rem 1.25rem;
            margin-bottom: 1rem;
        }

        .voorbeeld-titel {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            color: var(--accent-dark);
            margin-bottom: 0.375rem;
        }

        .voorbeeld p {
            font-size: 0.875rem;
            color: var(--primary-700);
            margin: 0;
        }

        .voorbeeld .mark {
            background: var(--wit);
            padding: 0.125em 0.375em;
            border-radius: 3px;
            font-weight: 600;
            color: var(--primary-800);
        }

        /* Formule */
        .formule-blok {
            background: var(--primary-50);
            border: 1px solid var(--primary-200);
            border-radius: 6px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }

        .formule-titel {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            color: var(--primary-600);
            margin-bottom: 0.75rem;
        }

        .formule {
            font-family: 'SF Mono', 'Consolas', monospace;
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary-800);
            text-align: center;
            background: var(--wit);
            padding: 0.875rem;
            border-radius: 4px;
            margin-bottom: 1rem;
            border: 1px solid var(--primary-200);
        }

        .formule-vars {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 0.25rem 0.75rem;
            font-size: 0.8125rem;
            color: var(--tekst-licht);
        }

        .formule-vars dt {
            font-family: 'SF Mono', 'Consolas', monospace;
            font-weight: 600;
            color: var(--primary-700);
        }

        /* Tips */
        .tips {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .tip {
            background: var(--primary-50);
            border-radius: 6px;
            padding: 1rem;
        }

        .tip-titel {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            color: var(--primary-600);
            margin-bottom: 0.375rem;
        }

        .tip p {
            font-size: 0.8125rem;
            color: var(--tekst-licht);
            margin: 0;
            line-height: 1.5;
        }

        /* Let op */
        .letop {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 6px;
            padding: 1rem 1.25rem;
            margin-top: 1rem;
        }

        .letop-titel {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            color: #b45309;
            margin-bottom: 0.375rem;
        }

        .letop p {
            font-size: 0.8125rem;
            color: #92400e;
            margin: 0;
            line-height: 1.5;
        }

        /* Verborgen */
        .verborgen {
            display: none;
        }

        /* Animatie */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .resultaat.toon {
            animation: fadeIn 0.25s ease;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .header {
                padding: 1.25rem 1rem;
            }

            .main {
                padding: 1rem;
            }

            .card-body {
                padding: 1rem;
            }

            .btn-group {
                grid-template-columns: 1fr;
            }

            .resultaat-main {
                padding: 1.5rem;
            }

            .resultaat-getal {
                font-size: 2.75rem;
            }

            .resultaat-meta {
                grid-template-columns: 1fr;
            }

            .tips {
                grid-template-columns: 1fr;
            }
        }

        /* Footer */
        .footer {
            max-width: 720px;
            margin: 0 auto;
            padding: 1.5rem 2rem;
            text-align: center;
        }

        .footer p {
            font-size: 0.75rem;
            color: var(--primary-400);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-inner">
            <h1>Steekproefcalculator</h1>
            <p>Bereken de benodigde steekproefgrootte voor uw onderzoek</p>
        </div>
    </header>

    <main class="main">
        <!-- Stap 1 -->
        <div class="card">
            <div class="card-header">
                <span class="card-nummer">1</span>
                <h2>Populatiegrootte</h2>
            </div>
            <div class="card-body">
                <div class="info">
                    <p>De <strong>populatie</strong> is de volledige groep die u wilt onderzoeken. Bijvoorbeeld: alle inwoners van een gemeente, alle klanten, of alle medewerkers.</p>
                </div>
                <div class="form-group">
                    <label class="form-label">Totale groepsgrootte</label>
                    <div class="input-wrap">
                        <input type="number" id="populatie" value="10000" min="10" max="100000000">
                        <span class="input-suffix">personen</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stap 2 -->
        <div class="card">
            <div class="card-header">
                <span class="card-nummer">2</span>
                <h2>Betrouwbaarheidsniveau</h2>
            </div>
            <div class="card-body">
                <div class="info">
                    <p>Het <strong>betrouwbaarheidsniveau</strong> geeft aan hoe zeker u bent dat het resultaat klopt. Bij 95%: als u het onderzoek 100 keer herhaalt, valt de werkelijke waarde 95 keer binnen de foutmarge.</p>
                </div>
                <div class="form-group">
                    <label class="form-label">Kies niveau</label>
                    <div class="btn-group">
                        <button type="button" class="btn-option" data-z="1.645" data-niveau="90">
                            90%
                            <small>Verkennend</small>
                        </button>
                        <button type="button" class="btn-option actief" data-z="1.96" data-niveau="95">
                            95%
                            <small>Standaard</small>
                        </button>
                        <button type="button" class="btn-option" data-z="2.576" data-niveau="99">
                            99%
                            <small>Streng</small>
                        </button>
                    </div>
                </div>
                <input type="hidden" id="zScore" value="1.96">
                <input type="hidden" id="betrouwbaarheid" value="95">
            </div>
        </div>

        <!-- Stap 3 -->
        <div class="card">
            <div class="card-header">
                <span class="card-nummer">3</span>
                <h2>Foutmarge</h2>
            </div>
            <div class="card-body">
                <div class="info">
                    <p>De <strong>foutmarge</strong> is de maximale afwijking die u accepteert. Bij 5% foutmarge en een resultaat van 60%: de werkelijke waarde ligt tussen 55% en 65%.</p>
                </div>
                <div class="form-group">
                    <label class="form-label">Toegestane afwijking</label>
                    <div class="slider-wrap">
                        <div class="slider-header">
                            <span>Nauwkeurigheid</span>
                            <span class="slider-value" id="foutmargeWaarde">±5%</span>
                        </div>
                        <input type="range" id="foutmarge" min="1" max="10" value="5" step="0.5">
                        <div class="slider-labels">
                            <span>Zeer nauwkeurig</span>
                            <span>Globaal beeld</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stap 4 -->
        <div class="card">
            <div class="card-header">
                <span class="card-nummer">4</span>
                <h2>Verwachte proportie</h2>
            </div>
            <div class="card-body">
                <div class="info">
                    <p>De <strong>verwachte proportie</strong> is uw schatting van het resultaat. Onzeker? Kies 50% — dat levert de grootste (en dus veiligste) steekproef op.</p>
                </div>
                <div class="form-group">
                    <label class="form-label">Geschatte uitkomst</label>
                    <div class="slider-wrap">
                        <div class="slider-header">
                            <span>Proportie</span>
                            <span class="slider-value" id="proportieWaarde">50%</span>
                        </div>
                        <input type="range" id="proportie" min="5" max="95" value="50" step="5">
                        <div class="slider-labels">
                            <span>5%</span>
                            <span>50%</span>
                            <span>95%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <button class="submit-btn" onclick="bereken()">Bereken steekproefgrootte</button>

        <!-- Resultaat -->
        <div id="resultaat" class="resultaat verborgen">
            <div class="resultaat-main">
                <p class="resultaat-label">Benodigde steekproef</p>
                <p class="resultaat-getal" id="steekproefGrootte">384</p>
                <p class="resultaat-eenheid">respondenten</p>
                
                <div class="resultaat-meta">
                    <div class="meta-item">
                        <p class="meta-label">Betrouwbaarheid</p>
                        <p class="meta-value" id="resBetrouwbaarheid">95%</p>
                    </div>
                    <div class="meta-item">
                        <p class="meta-label">Foutmarge</p>
                        <p class="meta-value" id="resFoutmarge">±5%</p>
                    </div>
                    <div class="meta-item">
                        <p class="meta-label">Steekproeffractie</p>
                        <p class="meta-value" id="resAandeel">3,84%</p>
                    </div>
                </div>
            </div>

            <div class="uitleg">
                <div class="uitleg-header">
                    <h3>Interpretatie</h3>
                </div>
                <div class="uitleg-body">
                    <div class="voorbeeld">
                        <p class="voorbeeld-titel">Voorbeeld</p>
                        <p>Stel dat <span class="mark" id="vbPercentage">60%</span> van uw steekproef "ja" antwoordt. Dan ligt de werkelijke waarde in de populatie met <span class="mark" id="vbBetrouwbaarheid">95%</span> zekerheid tussen <span class="mark" id="vbOnder">55%</span> en <span class="mark" id="vbBoven">65%</span>.</p>
                    </div>

                    <div class="formule-blok">
                        <p class="formule-titel">Formule van Cochran</p>
                        <p class="formule">n = (Z² × p × (1−p)) / e²</p>
                        <dl class="formule-vars">
                            <dt>n</dt><dd>benodigde steekproefgrootte</dd>
                            <dt>Z</dt><dd>z-score (1,96 bij 95%)</dd>
                            <dt>p</dt><dd>verwachte proportie</dd>
                            <dt>e</dt><dd>foutmarge</dd>
                        </dl>
                    </div>

                    <div class="tips">
                        <div class="tip">
                            <p class="tip-titel">Grote populaties</p>
                            <p>Boven 20.000 personen maakt de exacte grootte weinig uit. De benodigde steekproef blijft nagenoeg gelijk.</p>
                        </div>
                        <div class="tip">
                            <p class="tip-titel">Kleine populaties</p>
                            <p>Bij kleine groepen past de formule een correctie toe. U heeft dan relatief meer respondenten nodig.</p>
                        </div>
                    </div>

                    <div class="letop">
                        <p class="letop-titel">Houd rekening met non-respons</p>
                        <p>Niet iedereen reageert. Bij een verwacht responspercentage van 40% moet u <strong id="uitnodigingen">960</strong> personen uitnodigen om <strong id="benodigdVoor">384</strong> reacties te krijgen.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <p>Gebaseerd op de formule van Cochran met eindige-populatiecorrectie</p>
    </footer>

    <script>
        // Sliders
        const foutmargeSlider = document.getElementById('foutmarge');
        const proportieSlider = document.getElementById('proportie');
        const foutmargeWaarde = document.getElementById('foutmargeWaarde');
        const proportieWaarde = document.getElementById('proportieWaarde');

        foutmargeSlider.addEventListener('input', function() {
            foutmargeWaarde.textContent = '±' + this.value + '%';
        });

        proportieSlider.addEventListener('input', function() {
            proportieWaarde.textContent = this.value + '%';
        });

        // Knoppen
        document.querySelectorAll('.btn-option').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.btn-option').forEach(b => b.classList.remove('actief'));
                this.classList.add('actief');
                document.getElementById('zScore').value = this.dataset.z;
                document.getElementById('betrouwbaarheid').value = this.dataset.niveau;
            });
        });

        // Berekening
        function bereken() {
            const N = parseFloat(document.getElementById('populatie').value) || 1000000000;
            const Z = parseFloat(document.getElementById('zScore').value);
            const betrouwbaarheid = document.getElementById('betrouwbaarheid').value;
            const e = parseFloat(foutmargeSlider.value) / 100;
            const p = parseFloat(proportieSlider.value) / 100;

            // Cochran
            const n0 = (Z * Z * p * (1 - p)) / (e * e);

            // Eindige populatie correctie
            const n = Math.ceil(n0 / (1 + ((n0 - 1) / N)));

            // Update resultaten
            document.getElementById('steekproefGrootte').textContent = n.toLocaleString('nl-BE');
            document.getElementById('resBetrouwbaarheid').textContent = betrouwbaarheid + '%';
            document.getElementById('resFoutmarge').textContent = '±' + foutmargeSlider.value + '%';
            
            const aandeel = (n / N * 100);
            document.getElementById('resAandeel').textContent = 
                aandeel < 0.01 ? '<0,01%' : 
                aandeel.toLocaleString('nl-BE', {minimumFractionDigits: 2, maximumFractionDigits: 2}) + '%';

            // Voorbeeld
            const voorbeeldP = 60;
            const marge = parseFloat(foutmargeSlider.value);
            document.getElementById('vbPercentage').textContent = voorbeeldP + '%';
            document.getElementById('vbBetrouwbaarheid').textContent = betrouwbaarheid + '%';
            document.getElementById('vbOnder').textContent = (voorbeeldP - marge) + '%';
            document.getElementById('vbBoven').textContent = (voorbeeldP + marge) + '%';

            // Non-respons
            const uitnodigingen = Math.ceil(n / 0.4);
            document.getElementById('uitnodigingen').textContent = uitnodigingen.toLocaleString('nl-BE');
            document.getElementById('benodigdVoor').textContent = n.toLocaleString('nl-BE');

            // Toon
            const resultaatDiv = document.getElementById('resultaat');
            resultaatDiv.classList.remove('verborgen');
            resultaatDiv.classList.add('toon');
            resultaatDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Init
        bereken();
    </script>
</body>
</html>
