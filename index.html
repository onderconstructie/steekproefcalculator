<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steekproefcalculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --slate-800: #1e293b;
            --slate-700: #334155;
            --slate-600: #475569;
            --slate-500: #64748b;
            --slate-400: #94a3b8;
            --slate-300: #cbd5e1;
            --slate-200: #e2e8f0;
            --slate-100: #f1f5f9;
            --slate-50: #f8fafc;
            --wit: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: var(--slate-100);
            color: var(--slate-700);
            line-height: 1.6;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 880px;
            margin: 0 auto;
            padding: 3rem 2rem 4rem;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 3rem;
        }

        h1 {
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--slate-800);
            letter-spacing: -0.025em;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            font-size: 1rem;
            color: var(--slate-500);
        }

        /* Grid layouts */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.25rem;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .span-2 {
            grid-column: span 2;
        }

        /* Cards */
        .card {
            background: var(--wit);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.02);
        }

        .card-label {
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--slate-400);
            margin-bottom: 0.375rem;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--slate-800);
            margin-bottom: 0.625rem;
            letter-spacing: -0.01em;
        }

        .card-desc {
            font-size: 0.8125rem;
            color: var(--slate-500);
            line-height: 1.55;
            margin-bottom: 1.25rem;
        }

        /* Invoer */
        .input-wrap {
            position: relative;
        }

        .input-field {
            width: 100%;
            padding: 0.875rem 1rem;
            font-size: 1.0625rem;
            font-family: inherit;
            font-weight: 500;
            border: 1.5px solid var(--slate-200);
            border-radius: 8px;
            background: var(--wit);
            color: var(--slate-800);
            transition: border-color 0.15s, box-shadow 0.15s;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--slate-400);
            box-shadow: 0 0 0 3px rgba(148, 163, 184, 0.15);
        }

        .input-field.has-suffix {
            padding-right: 5rem;
        }

        .input-suffix {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8125rem;
            color: var(--slate-400);
            font-weight: 500;
        }

        /* Pills */
        .pills {
            display: flex;
            gap: 0.5rem;
        }

        .pill {
            flex: 1;
            padding: 0.75rem 0.5rem;
            font-size: 0.9375rem;
            font-family: inherit;
            font-weight: 600;
            text-align: center;
            border: 1.5px solid var(--slate-200);
            border-radius: 8px;
            background: var(--wit);
            color: var(--slate-600);
            cursor: pointer;
            transition: all 0.15s;
        }

        .pill:hover {
            border-color: var(--slate-300);
            background: var(--slate-50);
        }

        .pill.active {
            background: var(--slate-700);
            border-color: var(--slate-700);
            color: var(--wit);
        }

        .pill small {
            display: block;
            font-size: 0.625rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: 0.125rem;
            opacity: 0.65;
        }

        /* Slider */
        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 0.75rem;
        }

        .slider-label {
            font-size: 0.8125rem;
            color: var(--slate-500);
        }

        .slider-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--slate-700);
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: var(--slate-200);
            border-radius: 3px;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--slate-600);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 1px 4px rgba(0,0,0,0.15);
            transition: transform 0.1s;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: var(--slate-600);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }

        .slider-ticks {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.6875rem;
            color: var(--slate-400);
        }

        /* Resultaat */
        .resultaat-section {
            margin-top: 2rem;
            margin-bottom: 2.5rem;
        }

        .resultaat-card {
            background: var(--wit);
            border-radius: 12px;
            padding: 2rem;
            color: var(--slate-700);
            box-shadow: 0 1px 3px rgba(0,0,0,0.04), 0 1px 2px rgba(0,0,0,0.02);
            border: 1.5px solid var(--slate-200);
        }

        .resultaat-grid {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 2rem;
            align-items: center;
        }

        .resultaat-main {
            text-align: center;
            padding-right: 2rem;
            border-right: 1px solid var(--slate-200);
            min-width: 240px;
        }

        .resultaat-label {
            font-size: 0.6875rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            color: var(--slate-400);
            margin-bottom: 0.5rem;
        }

        .resultaat-getal {
            font-size: 3.5rem;
            font-weight: 700;
            line-height: 1;
            letter-spacing: -0.03em;
            color: var(--slate-600);
            min-width: 180px;
            display: inline-block;
        }

        .resultaat-eenheid {
            font-size: 0.875rem;
            color: var(--slate-500);
            margin-top: 0.25rem;
        }

        .resultaat-meta {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            min-width: 200px;
        }

        .meta-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }

        .meta-label {
            font-size: 0.75rem;
            color: var(--slate-400);
        }

        .meta-value {
            font-size: 1rem;
            font-weight: 600;
            color: var(--slate-700);
            min-width: 60px;
            text-align: right;
        }

        /* Uitleg sectie */
        .uitleg-section {
            margin-top: 1.5rem;
        }

        .section-title {
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--slate-400);
            margin-bottom: 1rem;
        }

        .uitleg-card {
            background: var(--wit);
            border-radius: 12px;
            padding: 1.25rem 1.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.04);
        }

        .uitleg-card h4 {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--slate-700);
            margin-bottom: 0.375rem;
        }

        .uitleg-card p {
            font-size: 0.8125rem;
            color: var(--slate-500);
            line-height: 1.55;
            margin: 0;
        }

        /* Formule */
        .formule-card {
            background: var(--wit);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.04);
        }

        .formule-card h4 {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--slate-700);
            margin-bottom: 1rem;
        }

        .formule {
            font-family: 'SF Mono', 'Consolas', monospace;
            font-size: 1rem;
            font-weight: 500;
            color: var(--slate-700);
            text-align: center;
            padding: 0.875rem;
            background: var(--slate-100);
            border-radius: 6px;
            margin-bottom: 1rem;
        }

        .formule-vars {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem 1.5rem;
            font-size: 0.75rem;
            color: var(--slate-500);
        }

        .formule-vars span {
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .formule-vars strong {
            font-family: 'SF Mono', monospace;
            font-weight: 600;
            color: var(--slate-600);
        }

        /* Let op */
        .letop-card {
            background: var(--slate-100);
            border-radius: 12px;
            padding: 1.25rem 1.5rem;
            color: var(--slate-700);
            border: 1.5px solid var(--slate-200);
        }

        .letop-card h4 {
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.375rem;
            color: var(--slate-700);
        }

        .letop-card p {
            font-size: 0.8125rem;
            line-height: 1.55;
            color: var(--slate-500);
            margin: 0;
        }

        .letop-card strong {
            font-weight: 600;
            color: var(--slate-700);
        }

        /* Voorbeeld */
        .voorbeeld-card {
            background: var(--slate-100);
            border-radius: 12px;
            padding: 1.25rem 1.5rem;
            border: 1.5px solid var(--slate-200);
        }

        .voorbeeld-card h4 {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--slate-500);
            margin-bottom: 0.5rem;
        }

        .voorbeeld-card p {
            font-size: 0.875rem;
            color: var(--slate-600);
            line-height: 1.55;
            margin: 0;
        }

        .voorbeeld-card .mark {
            background: var(--wit);
            padding: 0.125em 0.375em;
            border-radius: 4px;
            font-weight: 600;
            color: var(--slate-700);
        }

        /* Responsive */
        @media (max-width: 700px) {
            .container {
                padding: 2rem 1.25rem 3rem;
            }

            h1 {
                font-size: 1.5rem;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }

            .grid-3 {
                grid-template-columns: 1fr;
            }

            .span-2 {
                grid-column: span 1;
            }

            .resultaat-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .resultaat-main {
                padding-right: 0;
                padding-bottom: 1.5rem;
                border-right: none;
                border-bottom: 1px solid var(--slate-200);
            }

            .resultaat-getal {
                font-size: 3rem;
            }

            .resultaat-meta {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 1rem;
            }

            .meta-row {
                flex: 1;
                min-width: 100px;
                flex-direction: column;
                align-items: flex-start;
                gap: 0.25rem;
            }

            .pills {
                flex-direction: column;
            }
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--slate-200);
        }

        footer p {
            font-size: 0.75rem;
            color: var(--slate-400);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Steekproefcalculator</h1>
            <p class="subtitle">Bereken de benodigde steekproefgrootte voor uw onderzoek</p>
        </header>

        <!-- Resultaat bovenaan -->
        <section class="resultaat-section">
            <div class="resultaat-card">
                <div class="resultaat-grid">
                    <div class="resultaat-main">
                        <p class="resultaat-label">Benodigde steekproef</p>
                        <p class="resultaat-getal" id="resultaatGetal">384</p>
                        <p class="resultaat-eenheid">respondenten</p>
                    </div>
                    <div class="resultaat-meta">
                        <div class="meta-row">
                            <span class="meta-label">Betrouwbaarheid</span>
                            <span class="meta-value" id="metaBetrouwbaarheid">95%</span>
                        </div>
                        <div class="meta-row">
                            <span class="meta-label">Foutmarge</span>
                            <span class="meta-value" id="metaFoutmarge">±5%</span>
                        </div>
                        <div class="meta-row">
                            <span class="meta-label">Steekproeffractie</span>
                            <span class="meta-value" id="metaFractie">3,84%</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Invoer: 2x2 grid -->
        <div class="grid-2">
            <!-- Populatie -->
            <div class="card">
                <p class="card-label">Stap 1</p>
                <h3 class="card-title">Populatiegrootte</h3>
                <p class="card-desc">De volledige groep die u wilt onderzoeken. Bijvoorbeeld alle inwoners van een gemeente.</p>
                <div class="input-wrap">
                    <input type="number" class="input-field has-suffix" id="populatie" value="10000" min="10" oninput="bereken()">
                    <span class="input-suffix">personen</span>
                </div>
            </div>

            <!-- Betrouwbaarheid -->
            <div class="card">
                <p class="card-label">Stap 2</p>
                <h3 class="card-title">Betrouwbaarheidsniveau</h3>
                <p class="card-desc">Hoe zeker wilt u zijn dat het resultaat klopt? 95% is de standaard in onderzoek.</p>
                <div class="pills">
                    <button class="pill" data-z="1.645" data-n="90" onclick="kiesNiveau(this)">90%<small>Verkennend</small></button>
                    <button class="pill active" data-z="1.96" data-n="95" onclick="kiesNiveau(this)">95%<small>Standaard</small></button>
                    <button class="pill" data-z="2.576" data-n="99" onclick="kiesNiveau(this)">99%<small>Streng</small></button>
                </div>
            </div>

            <!-- Foutmarge -->
            <div class="card">
                <p class="card-label">Stap 3</p>
                <h3 class="card-title">Foutmarge</h3>
                <p class="card-desc">De maximale afwijking die u accepteert. Kleinere marge = meer respondenten nodig.</p>
                <div class="slider-header">
                    <span class="slider-label">Toegestane afwijking</span>
                    <span class="slider-value" id="foutmargeWaarde">±5%</span>
                </div>
                <input type="range" id="foutmarge" min="1" max="10" value="5" step="0.5" oninput="updateFoutmarge()">
                <div class="slider-ticks">
                    <span>1%</span>
                    <span>5%</span>
                    <span>10%</span>
                </div>
            </div>

            <!-- Proportie -->
            <div class="card">
                <p class="card-label">Stap 4</p>
                <h3 class="card-title">Verwachte proportie</h3>
                <p class="card-desc">Uw schatting van de uitkomst. Onzeker? Kies 50% voor de veiligste berekening.</p>
                <div class="slider-header">
                    <span class="slider-label">Geschatte uitkomst</span>
                    <span class="slider-value" id="proportieWaarde">50%</span>
                </div>
                <input type="range" id="proportie" min="5" max="95" value="50" step="5" oninput="updateProportie()">
                <div class="slider-ticks">
                    <span>5%</span>
                    <span>50%</span>
                    <span>95%</span>
                </div>
            </div>
        </div>

        <!-- Uitleg sectie -->
        <section class="uitleg-section">
            <p class="section-title">Uitleg & achtergrond</p>
            
            <div class="grid-2" style="margin-bottom: 1.25rem;">
                <div class="voorbeeld-card">
                    <h4>Voorbeeld</h4>
                    <p>Stel dat <span class="mark" id="vbPct">60%</span> van uw steekproef "ja" antwoordt. Dan ligt de werkelijke waarde met <span class="mark" id="vbConf">95%</span> zekerheid tussen <span class="mark" id="vbLo">55%</span> en <span class="mark" id="vbHi">65%</span>.</p>
                </div>
                <div class="letop-card">
                    <h4>Let op: non-respons</h4>
                    <p>Niet iedereen reageert. Bij 40% respons moet u <strong id="uitnodigingen">960</strong> personen benaderen voor <strong id="benodigdVoor">384</strong> reacties.</p>
                </div>
            </div>

            <div class="grid-3">
                <div class="uitleg-card">
                    <h4>Grote populaties</h4>
                    <p>Boven 20.000 personen maakt de exacte grootte weinig uit. De benodigde steekproef blijft nagenoeg constant.</p>
                </div>
                <div class="uitleg-card">
                    <h4>Kleine populaties</h4>
                    <p>Bij kleine groepen is de eindige-populatiecorrectie belangrijk. U heeft relatief meer respondenten nodig.</p>
                </div>
                <div class="uitleg-card">
                    <h4>Proportie 50%</h4>
                    <p>Bij 50% is de variatie maximaal. Dit geeft de grootste steekproef en is de veiligste keuze bij onzekerheid.</p>
                </div>
            </div>

            <div class="formule-card" style="margin-top: 1.25rem;">
                <h4>Formule van Cochran</h4>
                <p class="formule">n = (Z² × p × (1−p)) / e²</p>
                <div class="formule-vars">
                    <span><strong>n</strong> steekproefgrootte</span>
                    <span><strong>Z</strong> z-score (1,96 bij 95%)</span>
                    <span><strong>p</strong> verwachte proportie</span>
                    <span><strong>e</strong> foutmarge</span>
                </div>
            </div>
        </section>

        <footer>
            <p>Gebaseerd op de formule van Cochran met eindige-populatiecorrectie</p>
        </footer>
    </div>

    <script>
        let zScore = 1.96;
        let niveau = 95;

        function kiesNiveau(btn) {
            document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
            btn.classList.add('active');
            zScore = parseFloat(btn.dataset.z);
            niveau = parseInt(btn.dataset.n);
            bereken();
        }

        function updateFoutmarge() {
            const val = document.getElementById('foutmarge').value;
            document.getElementById('foutmargeWaarde').textContent = '±' + val + '%';
            bereken();
        }

        function updateProportie() {
            const val = document.getElementById('proportie').value;
            document.getElementById('proportieWaarde').textContent = val + '%';
            bereken();
        }

        function bereken() {
            const N = parseFloat(document.getElementById('populatie').value) || 1000000000;
            const Z = zScore;
            const e = parseFloat(document.getElementById('foutmarge').value) / 100;
            const p = parseFloat(document.getElementById('proportie').value) / 100;

            // Cochran
            const n0 = (Z * Z * p * (1 - p)) / (e * e);
            const n = Math.ceil(n0 / (1 + ((n0 - 1) / N)));

            // Update resultaat
            document.getElementById('resultaatGetal').textContent = n.toLocaleString('nl-BE');
            document.getElementById('metaBetrouwbaarheid').textContent = niveau + '%';
            document.getElementById('metaFoutmarge').textContent = '±' + document.getElementById('foutmarge').value + '%';
            
            const fractie = (n / N * 100);
            document.getElementById('metaFractie').textContent = 
                fractie < 0.01 ? '<0,01%' : 
                fractie.toLocaleString('nl-BE', {minimumFractionDigits: 2, maximumFractionDigits: 2}) + '%';

            // Voorbeeld
            const marge = parseFloat(document.getElementById('foutmarge').value);
            document.getElementById('vbPct').textContent = '60%';
            document.getElementById('vbConf').textContent = niveau + '%';
            document.getElementById('vbLo').textContent = (60 - marge) + '%';
            document.getElementById('vbHi').textContent = (60 + marge) + '%';

            // Non-respons
            const uitnodigingen = Math.ceil(n / 0.4);
            document.getElementById('uitnodigingen').textContent = uitnodigingen.toLocaleString('nl-BE');
            document.getElementById('benodigdVoor').textContent = n.toLocaleString('nl-BE');
        }

        bereken();
    </script>
</body>
</html>
